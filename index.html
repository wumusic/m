<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音乐</title>
    <style>
        html,
        body {
            padding: 0;
            margin: 0;
        }
    </style>
    <script src="jquery-1.9.1.min.js"></script>
    <script>
        var audio;
        $(window).ready(
            function () {
                audio = document.getElementById("music");
            }
        )
        function playm() {

            if ($("#g_play").css("visibility") === "hidden") {
                $("#g_play").css("visibility", "visible")
                $("#g_pause").css("visibility", "hidden")
                clearTimeout(t);
                audio.pause();
            } else {
                $("#g_play").css("visibility", "hidden")
                $("#g_pause").css("visibility", "visible")
                f();
                audio.play();
            }

        }
        var t;
        var strl = "LOADING"
        var strtime = ""
        var indexs = 0;
        function f() {

            t = setTimeout(function () {
                var curtt = parseInt(audio.currentTime);
                var fullt = parseInt(audio.duration);

                if (curtt === fullt) {
                    $("#g_play").css("visibility", "visible")
                    $("#g_pause").css("visibility", "hidden")
                    clearTimeout(t);
                    audio.pause();
                    audio.currentTime = 0;
                }
                $("#timeline").css("width", (curtt / fullt) * 100 + "%");
                if (isNaN(audio.duration)) {

                    if (indexs < strl.length) {
                        strtime += strl.charAt(indexs);
                        indexs += 1;
                        console.log(indexs)

                        $("#time_txt").html(strtime);
                    } else {
                        indexs = 0;
                        strtime = "";
                        $("#time_txt").html(strtime);
                    }

                } else {
                    var t1 = parseInt(curtt / 60) >= 10 ? parseInt(curtt / 60) + ":" + (parseInt(curtt % 60) >= 10 ? parseInt(curtt % 60) : "0" + parseInt(curtt % 60)) : "0" + parseInt(curtt / 60) + ":" + (parseInt(curtt % 60) >= 10 ? parseInt(curtt % 60) : "0" + parseInt(curtt % 60));
                    var t2 = parseInt(audio.duration / 60) >= 10 ? parseInt(audio.duration / 60) + ":" + (parseInt(audio.duration % 60) >= 10 ? parseInt(audio.duration % 60) : "0" + parseInt(audio.duration % 60)) : "0" + parseInt(audio.duration / 60) + ":" + (parseInt(audio.duration % 60) >= 10 ? parseInt(audio.duration % 60) : "0" + parseInt(audio.duration % 60))
                    //console.log(parseInt(curtt / 60) >= 10 ? parseInt(curtt/ 60) + ":" + (parseInt(curtt % 60) >= 10 ? parseInt(curtt% 60) : "0" + parseInt(curtt% 60)) : "0" + parseInt(curtt / 60) + ":" + (parseInt(curtt% 60) >= 10 ? parseInt(curtt % 60) : "0" + parseInt(curtt % 60)))
                    $("#time_txt").html(t1 + "/" + t2);
                }
                f();
            }, 500)
        }
        function c() {
            var objLeft = $("#timebox").offset().left;
            var mouseX = event.clientX + document.body.scrollLeft;
            var objX = mouseX - objLeft;
            // console.log(objX);
            // console.log(objX * audio.duration / parseInt($("#timebox").width()));
            audio.currentTime = objX * audio.duration / parseInt($("#timebox").width());
            $("#timeline").css("width", (objX / parseInt($("#timebox").width())) * 100 + "%");
        }
    </script>
</head>

<body>
    <div style="background-color:#edeaea;width: 100%;height: 80px;display: grid;grid-template-columns: 80px auto;">
        <audio controls="controls" id="music" mindex="1" hidden="hidden" src="1.mp3" onload="f()"></audio>
        <div style="background-color: darkgoldenrod;height: 100%;width: 80px;"></div>
        <div style="display: grid; grid-template-rows: auto 3px;background-color:gray;width: 100%;height: 100%;">
            <div
                style="background-color: coral; display: grid; grid-template-columns: 40px 40px 40px 40px auto;grid-gap: 6px 6px; align-items: center;text-align: center;padding: 6px;">
                <div style="color:aqua" stroke="#fff" onclick="prevM()"><svg viewBox="0 0 40 40" stroke="#fff"
                        fill="#fff">
                        <circle cx="20" cy="20" r="15" stroke-width="3" fill="none"></circle>
                        <polygon points="10,20 18,10 18,20 26,10 26,30 18,20 18,30"></polygon>
                    </svg></div>
                <div onclick="playm()" state="pause"><svg viewBox="0 0 40 40" stroke="#fff" fill="#fff">
                        <circle cx="20" cy="20" r="15" stroke-width="3" fill="none"></circle>
                        <g id="g_play">
                            <polygon points="15,12 15,28 28,20"></polygon>
                        </g>
                        <g id="g_pause" style="visibility:hidden;">
                            <rect width="6" height="18" x="12" y="11"></rect>
                            <rect width="6" height="18" x="22" y="11"></rect>
                        </g>
                    </svg></div>
                <div><svg viewBox="0 0 40 40" stroke="#fff" fill="#fff">
                        <circle cx="20" cy="20" r="15" stroke-width="3" fill="none"></circle>
                        <!-- <circle cx="20" cy="20" r="8" stroke="black" stroke-width="4" fill="none"></circle> -->
                        <path d="m14 15 a8 8 0 1 1 0 10" stroke-width="4" fill="none" stroke-linecap="round" />
                    </svg></div>
                <div onclick="nextM()"><svg viewBox="0 0 40 40" stroke="#fff" fill="#fff">
                        <circle cx="20" cy="20" r="15" stroke-width="3" fill="none"></circle>
                        <polygon points="14,10, 14,30 22,20 22,30 30,20 22,10 22,20"></polygon>
                    </svg></div>
                <div>
                    <div>music name</div>
                    <div id="time_txt"> 00:00/00:00</div>
                </div>
            </div>
            <div id="timebox" style="background-color:gray;width:100%;" onclick="c()">
                <div id="timeline" style="background-color:cornflowerblue;width:0;height: 100%;"></div>
            </div>
        </div>
    </div>
</body>

</html>
